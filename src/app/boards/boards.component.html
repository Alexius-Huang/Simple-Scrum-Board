<ul class="boards">
  <li
    class="board"
    *ngFor="let board of boards"
  >
    <div class="title-wrapper">
      <h2 *ngIf="boardEditingId !== board.id; else editBoardInput">{{ board.name }}</h2>
      <ng-template #editBoardInput>
        <input
          class="edit-board-input"
          [(ngModel)]="cacheBoardName"
          (keyDown.enter)="updateBoardName({ id: board.id, name: cacheBoardName })"
        />
        <button class="update-board" (click)="updateBoardName({ id: board.id, name: cacheBoardName })">
          <img src="assets/icons/done-black.svg" class="icon">
        </button>
      </ng-template>
    </div>

    <div class="tools">
      <button (click)="newTask(board.id)">
        <img src="assets/icons/playlist-add.svg" />
      </button>
      <button (click)="editBoard(board.id)">
        <img src="assets/icons/edit.svg" />
      </button>
      <button (click)="removeBoard(board.id)">
        <img src="assets/icons/remove.svg" />
      </button>
    </div>

    <form
      class="new-task-form"
      *ngIf="newTaskBoardId === board.id"
      [formGroup]="newTaskForm"
      (ngSubmit)="onNewTaskSubmit(newTaskForm.value)"
    >
      <label [class.error]="newTaskFormErrors.title.required">
        <p class="label-title">Title</p>
        <input
          type="text" required
          formControlName="title"
          placeholder="Task Title"
        />
      </label>

      <label [class.error]="newTaskFormErrors.description.required">
        <p class="label-title">Description</p>
        <input
          type="text" required
          formControlName="description"
          placeholder="Task Description"
        />
      </label>

      <div class="btn-group">
        <button type="submit">
          <img src="assets/icons/done.svg" />
        </button>
        <button (click)="clearNewTaskForm()">
          <img src="assets/icons/clear.svg" />
        </button>      
      </div>
    </form>

    <ul class="tasks">
      <li
        class="task"
        *ngFor="let task of boardTaskMap.get(board.id)"
      >
        <h3>{{ task.title }}</h3>
        <p>{{ task.description }}</p>
      </li>
    </ul>
  </li>
</ul>
